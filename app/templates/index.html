{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}

<!-- ── Hero ─────────────────────────────────────────────────── -->
<section class="min-h-[85vh] flex items-center justify-center px-6 pt-20 pb-16 relative overflow-hidden">
  <canvas id="particles" class="absolute inset-0 pointer-events-none z-0"></canvas>
  <div class="max-w-3xl text-center relative z-10" data-aos="fade-up" data-aos-duration="800">
    <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-brand-100 text-brand-700 text-xs font-semibold tracking-wide mb-8 ring-1 ring-brand-200">
      <span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-brand-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-brand-500"></span></span>
      AI-POWERED NUTRITION
    </div>
    <h1 class="text-5xl sm:text-6xl lg:text-7xl font-extrabold tracking-tight leading-[1.08] mb-6">
      Eat smarter.<br class="hidden sm:block" />
      Live <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-400 to-emerald-500">healthier.</span>
    </h1>
    <p class="text-lg sm:text-xl text-surface-700/60 max-w-xl mx-auto mb-10 leading-relaxed">
      Personalized diet plans, intelligent recipe recommendations, and instant food nutrition analysis — all powered by AI.
    </p>
    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
      {% if logged_in %}
      <a href="/diet" class="btn-primary">
        <i data-lucide="sparkles" class="w-4 h-4"></i>
        Get Your Diet Plan
      </a>
      <a href="/analyzer" class="btn-ghost">
        <i data-lucide="scan-line" class="w-4 h-4"></i>
        Analyze Food Photo
      </a>
      {% else %}
      <a href="/login" class="btn-primary">
        <i data-lucide="log-in" class="w-4 h-4"></i>
        Sign In to Get Started
      </a>
      <a href="#features" class="btn-ghost">
        <i data-lucide="arrow-down" class="w-4 h-4"></i>
        Explore Features
      </a>
      {% endif %}
    </div>
  </div>
</section>

<!-- ── Stats strip ────────────────────────────────────────── -->
<section class="max-w-5xl mx-auto px-6 pb-16 grid grid-cols-2 sm:grid-cols-4 gap-4">
  <div class="stat-card" data-aos="zoom-in" data-aos-delay="0">
    <p class="text-3xl font-extrabold text-brand-600" data-countup="50000">0</p>
    <p class="text-xs text-surface-500 font-medium mt-1">Recipes Indexed</p>
  </div>
  <div class="stat-card" data-aos="zoom-in" data-aos-delay="100">
    <p class="text-3xl font-extrabold text-amber-500" data-countup="9">0</p>
    <p class="text-xs text-surface-500 font-medium mt-1">Nutrition Metrics</p>
  </div>
  <div class="stat-card" data-aos="zoom-in" data-aos-delay="200">
    <p class="text-3xl font-extrabold text-violet-500" data-countup="15">0</p>
    <p class="text-xs text-surface-500 font-medium mt-1">AI Food Detection</p>
  </div>
  <div class="stat-card" data-aos="zoom-in" data-aos-delay="300">
    <p class="text-3xl font-extrabold text-rose-500" data-countup="5">0</p>
    <p class="text-xs text-surface-500 font-medium mt-1">Calorie Plans</p>
  </div>
</section>

<!-- ── Feature cards ──────────────────────────────────────── -->
<section id="features" class="scroll-mt-24 max-w-6xl mx-auto px-6 pb-24">
  <div class="section-header" data-aos="fade-up">
    <span class="section-badge bg-surface-100 text-surface-600">FEATURES</span>
    <h2 class="section-title">Everything You Need</h2>
    <p class="section-desc">Three powerful tools to help you eat smarter, cook better, and understand your food.</p>
  </div>

  <div class="grid sm:grid-cols-3 gap-6">
    <!-- Diet Plan -->
    <a href="/diet" class="feature-card group block" data-aos="fade-up" data-aos-delay="100">
      <div class="feature-icon bg-brand-100 text-brand-600 group-hover:scale-110 transition-transform">
        <i data-lucide="heart-pulse" class="w-5 h-5"></i>
      </div>
      <h3 class="font-semibold text-lg mt-4 mb-1">Diet Plan Generator</h3>
      <p class="text-sm text-surface-700/50 leading-relaxed mb-4">Enter your body metrics and goals to receive a fully personalized daily meal plan.</p>
      <span class="text-sm font-semibold text-brand-600 group-hover:gap-2 inline-flex items-center gap-1 transition-all">
        Get started <i data-lucide="arrow-right" class="w-3.5 h-3.5"></i>
      </span>
      {% if not logged_in %}
      <div class="mt-3 text-xs text-surface-400 flex items-center gap-1">
        <i data-lucide="lock" class="w-3 h-3"></i> Sign in required
      </div>
      {% endif %}
    </a>

    <!-- Recipe Finder -->
    <a href="/recipes" class="feature-card group block" data-aos="fade-up" data-aos-delay="200">
      <div class="feature-icon bg-amber-100 text-amber-600 group-hover:scale-110 transition-transform">
        <i data-lucide="chef-hat" class="w-5 h-5"></i>
      </div>
      <h3 class="font-semibold text-lg mt-4 mb-1">Recipe Finder</h3>
      <p class="text-sm text-surface-700/50 leading-relaxed mb-4">Set nutritional targets and optional ingredients to discover matching recipes instantly.</p>
      <span class="text-sm font-semibold text-amber-600 group-hover:gap-2 inline-flex items-center gap-1 transition-all">
        Find recipes <i data-lucide="arrow-right" class="w-3.5 h-3.5"></i>
      </span>
      {% if not logged_in %}
      <div class="mt-3 text-xs text-surface-400 flex items-center gap-1">
        <i data-lucide="lock" class="w-3 h-3"></i> Sign in required
      </div>
      {% endif %}
    </a>

    <!-- Food Analyzer -->
    <a href="/analyzer" class="feature-card group block" data-aos="fade-up" data-aos-delay="300">
      <div class="feature-icon bg-violet-100 text-violet-600 group-hover:scale-110 transition-transform">
        <i data-lucide="camera" class="w-5 h-5"></i>
      </div>
      <h3 class="font-semibold text-lg mt-4 mb-1">Food Analyzer</h3>
      <p class="text-sm text-surface-700/50 leading-relaxed mb-4">Upload a photo and our AI identifies every food item with detailed nutrition breakdown.</p>
      <span class="text-sm font-semibold text-violet-600 group-hover:gap-2 inline-flex items-center gap-1 transition-all">
        Analyze food <i data-lucide="arrow-right" class="w-3.5 h-3.5"></i>
      </span>
      {% if not logged_in %}
      <div class="mt-3 text-xs text-surface-400 flex items-center gap-1">
        <i data-lucide="lock" class="w-3 h-3"></i> Sign in required
      </div>
      {% endif %}
    </a>
  </div>
</section>

<!-- ── How it works ────────────────────────────────────────── -->
<section class="max-w-5xl mx-auto px-6 pb-24">
  <div class="section-header" data-aos="fade-up">
    <span class="section-badge bg-brand-100 text-brand-700">HOW IT WORKS</span>
    <h2 class="section-title">Three Simple Steps</h2>
  </div>
  <div class="grid sm:grid-cols-3 gap-8">
    <div class="text-center" data-aos="fade-up" data-aos-delay="100">
      <div class="w-14 h-14 mx-auto rounded-2xl bg-gradient-to-br from-brand-400 to-brand-600 text-white flex items-center justify-center text-xl font-bold mb-4 shadow-lg shadow-brand-500/20">1</div>
      <h4 class="font-semibold mb-1">Input Your Info</h4>
      <p class="text-sm text-surface-500">Enter your age, weight, height, and dietary preferences.</p>
    </div>
    <div class="text-center" data-aos="fade-up" data-aos-delay="200">
      <div class="w-14 h-14 mx-auto rounded-2xl bg-gradient-to-br from-amber-400 to-amber-600 text-white flex items-center justify-center text-xl font-bold mb-4 shadow-lg shadow-amber-500/20">2</div>
      <h4 class="font-semibold mb-1">AI Analyzes</h4>
      <p class="text-sm text-surface-500">Our ML models find the best recipes and nutrition plans for you.</p>
    </div>
    <div class="text-center" data-aos="fade-up" data-aos-delay="300">
      <div class="w-14 h-14 mx-auto rounded-2xl bg-gradient-to-br from-violet-400 to-violet-600 text-white flex items-center justify-center text-xl font-bold mb-4 shadow-lg shadow-violet-500/20">3</div>
      <h4 class="font-semibold mb-1">Get Results</h4>
      <p class="text-sm text-surface-500">Receive personalized meal plans, recipes, and nutrition insights.</p>
    </div>
  </div>
</section>

{% endblock %}

{% block scripts %}
<script>
// CountUp animation for stat cards
document.querySelectorAll('[data-countup]').forEach(el => {
  const target = parseInt(el.dataset.countup);
  // countUp.js UMD exposes as window.countUp.CountUp
  const CU = window.CountUp || (window.countUp && window.countUp.CountUp);
  if (CU) {
    const cu = new CU(el, target, { duration: 2.5, separator: ',', enableScrollSpy: true, scrollSpyOnce: true });
    if (!cu.error) cu.start();
  } else { el.textContent = target.toLocaleString(); }
});
</script>
{% endblock %}
